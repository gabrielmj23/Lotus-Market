<%- include("partials/header"); %>
<h1><%- title.slice(14); %></h1>
<h6><strong>Name: </strong><%- category.name %></h6>
<h6><strong>Description: </strong><%- category.description %></h6>
<% if (items.length > 0) { %>
    <p class="text-danger"><strong>Please delete the following items before deleting this category</strong></p>
    <hr>
    <div style="margin-top: 20px; margin-left: 20px;">
        <h4>Items</h4>
        <dl>
            <% items.forEach(item => { %>
                <dt><a href="<%- item.url %>"><%- item.name %></a></dt>
                <dl><%- item.in_stock %> in stock</dl>
            <% }); %>
        </dl>
    </div>
<% } else { %>
    <p class="text-danger"><strong>Are you sure you want to delete this category?</strong></p>
    <form method="post" action="">
        <div class="form-group mb-3">
            <input id="categoryid" class="form-control" type="hidden" name="categoryid" required="true" value="<%- category._id %>">
        </div>
        <div class="form-group mb-3">
            <label for="pw">Admin Password: </label>
            <input id="pw" class="form-control" type="password" placeholder="Password" autocomplete="off" name="pw" required="true">
        </div>
        <button class="btn btn-danger" type="submit">Delete</button>
    </form>
<% } %>
<% if (typeof errors !== 'undefined') { %>
    <ul>
        <% errors.forEach(error => { %>
            <li class="text-danger"><%- error.msg %></li>
        <% }); %>
    </ul>
<% } %>
<%- include("partials/footer"); %>